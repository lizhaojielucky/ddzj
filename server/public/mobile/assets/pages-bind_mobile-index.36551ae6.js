import{d as e,v as a,W as o,a1 as l,x as t,o as r,b as s,w as u,e as d,g as i,t as n,am as m,an as c,ay as f,a6 as b,r as p,a as _,j as x}from"./index.9cb42b0a.js";import{_ as v}from"./u-input.76fad595.js";import{_ as h}from"./u-form-item.0965a801.js";import{_ as g}from"./u-verification-code.f9570c5a.js";import{_ as j}from"./u-form.8da3bcb2.js";import{_ as w}from"./u-button.1b523469.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import"./u-icon.468cc24b.js";var y=k(e({__name:"index",setup(e){const k=a(),y=o(""),V=l(),B=e=>{y.value=e},C=t({type:"bind",mobile:"",code:""}),$=async()=>{var e,a;if(!C.mobile)return uni.$u.toast("请输入手机号码");(null==(e=k.value)?void 0:e.canGetCode)&&(await m({scene:c.BIND_MOBILE,mobile:C.mobile}),uni.$u.toast("发送成功"),null==(a=k.value)||a.start())},I=async()=>C.mobile?C.code?(await f(C,{token:V.temToken}),uni.$u.toast("绑定成功"),V.login(V.temToken),b(),void console.log("绑定成功")):uni.$u.toast("请输入验证码"):uni.$u.toast("请输入手机号码");return(e,a)=>{const o=p(_("u-input"),v),l=p(_("u-form-item"),h),t=p(_("u-verification-code"),g),m=x,c=p(_("u-form"),j),f=p(_("u-button"),w);return r(),s(m,{class:"bg-white min-h-full flex flex-col items-center px-[40rpx] pt-[40rpx] box-border"},{default:u((()=>[d(m,{class:"w-full"},{default:u((()=>[d(c,{borderBottom:"","label-width":150},{default:u((()=>[d(l,{label:"手机号",borderBottom:""},{default:u((()=>[d(o,{class:"flex-1",modelValue:C.mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>C.mobile=e),border:!1,placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),d(l,{label:"验证码",borderBottom:""},{default:u((()=>[d(o,{class:"flex-1",modelValue:C.code,"onUpdate:modelValue":a[1]||(a[1]=e=>C.code=e),placeholder:"请输入验证码",border:!1},null,8,["modelValue"]),d(m,{class:"border-l border-solid border-0 border-light pl-3 text-muted leading-4 ml-3 w-[180rpx]",onClick:$},{default:u((()=>[d(t,{ref_key:"uCodeRef",ref:k,seconds:60,onChange:B,"change-text":"x秒"},null,512),i(" "+n(y.value),1)])),_:1})])),_:1})])),_:1}),d(m,{class:"mt-[40rpx]"},{default:u((()=>[d(f,{type:"error",shape:"circle",onClick:I},{default:u((()=>[i(" 确定 ")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-9a7542d0"]]);export{y as default};
