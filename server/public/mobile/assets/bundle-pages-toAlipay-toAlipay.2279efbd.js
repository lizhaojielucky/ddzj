import{d as e,W as a,y as s,ab as r,bv as l,ad as t,a3 as o,bw as u,z as n,o as c,b as i,w as v,h as d,f as m,E as p,j as _}from"./index.9cb42b0a.js";import{_ as f}from"./plugin-vue_export-helper.21dcd24c.js";var y=f(e({__name:"toAlipay",setup(e){const f=a(),y=a(),g=a(),b=a();let w=a(!1);const h=a();return s((e=>{f.value=e.order_id,y.value=e.from,g.value=e.pay_way,b.value=e.key})),r((async()=>{if(navigator.userAgent.toLowerCase().match(/MicroMessenger/i))return w.value=!0,void(h.value=setInterval((()=>{l({from:y.value,order_id:f.value},b.value).then((function(e){console.log(e),1==e.pay_status&&(clearInterval(h.value),t({showCancel:!1,content:"支付成功",success:()=>{if("order"==y.value){const e=JSON.stringify({order_id:f.value,from:y.value});o({url:`/bundle/pages/payment_result/payment_result?param=${e}`})}"recharge"==y.value&&o({url:"/bundle/pages/user_wallet/user_wallet?isPay=true"})}}))}))}),1e3));const e=await u({from:y.value,pay_way:g.value,order_id:f.value},b.value);console.log(e);const a=document.createElement("div");a.innerHTML=e.config,document.body.appendChild(a),document.forms[0].submit()})),n((e=>{clearInterval(h.value)})),(e,a)=>{const s=p,r=_;return c(),i(r,{class:"container"},{default:v((()=>[d(w)?(c(),i(s,{key:0,src:"/mobile/assets/Alipay.44240aee.png",class:"img"})):m("v-if",!0)])),_:1})}}}),[["__scopeId","data-v-e121a6f2"]]);export{y as default};
